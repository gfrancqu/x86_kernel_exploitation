#!/bin/sh

echo "Loading, please wait..."

[ -d /dev ] || mkdir -m 0755 /dev
[ -d /root ] || mkdir -m 0700 /root
[ -d /sys ] || mkdir /sys
[ -d /proc ] || mkdir /proc
[ -d /tmp ] || mkdir /tmp
mkdir -p /var/lock
mount -t sysfs -o nodev,noexec,nosuid none /sys
mount -t proc -o nodev,noexec,nosuid none /proc
mknod -m 0666 /dev/null c 1 3
mknod -m 0660 /dev/ttyS0 c 4 64

# module
echo 0 > /proc/sys/vm/mmap_min_addr
insmod /lib/vulnModule.ko
mknod -m 0666 /dev/vuln c 250 0
chmod a+rw /dev/vuln

setsid cttyhack setuidgid 1000 sh
umount /proc
umount /sys
 
poweroff -f
